<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="SA23204171" />

<meta name="date" content="2023-12-08" />

<title>Introduction to SA23204171</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to SA23204171</h1>
<h4 class="author">SA23204171</h4>
<h4 class="date">2023-12-08</h4>



<div id="overview" class="section level2">
<h2>Overview</h2>
<p><strong>SA23204171</strong> is a simple package that converts
portfolio data into a specific from. Given a data frame of which each
row containing the first 10 core stocks of a portfolio, convert it to a
matrix with its rownames being the names of all core stocks in the data
frame, and the rest of rows marking whether this core stock appears in
the portfolio corresponding to its row in the original data frame with 1
and 0. Meanwhile there might be false data in some portfolios, and we
find them and correct them.</p>
</div>
<div id="convert-a-correct-portfolio-data-frame" class="section level2">
<h2>Convert a correct portfolio data frame</h2>
<p>For simplicity we use the 26 letters as stock names to give the
following example.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># stock name</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>stock <span class="ot">&lt;-</span> LETTERS</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="co"># generate 10 portfolios</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  l[[i]] <span class="ot">&lt;-</span> <span class="fu">sample</span>(stock, <span class="dv">10</span>)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>}</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># portfolio is a data frame with each row containing the 10 core stocks of a </span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co"># portfolio. portfolio has no error data, because every stock appears at most </span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co"># once in each row.</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>portfolio <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">rbind</span>(l[[<span class="dv">1</span>]], l[[<span class="dv">2</span>]], l[[<span class="dv">3</span>]], l[[<span class="dv">4</span>]], l[[<span class="dv">5</span>]], l[[<span class="dv">6</span>]],</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>                                 l[[<span class="dv">7</span>]], l[[<span class="dv">8</span>]], l[[<span class="dv">9</span>]], l[[<span class="dv">10</span>]]))</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co"># convert the data frame</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="fu">library</span>(SA23204171)</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">convert</span>(portfolio)</span></code></pre></div>
<p>The output <strong>result</strong> is a list. The first element
<em>res</em> is the converted matrix with each row corresponding to the
portfolio in the data frame <strong>portfolio</strong>, and if
<em>res</em>[i, j] = 1, then stock j appears in the portfolio i.
Besides, the order of <em>res</em>’s rownames corresponds to the number
of times of each stock appearing in all portfolios. Namely, the R code
“colSums(result$res)” gives a vector of descending order. The second
element <em>data</em> is the original data frame
<strong>portfolio</strong>. The third element <em>mat.m</em> is of no
use to the user. The last element <em>correct</em> tells whether the
original data frame contains false data. If <em>correct</em> is TRUE,
then the original data frame contains no false data, FALSE
otherwise.</p>
</div>
<div id="convert-a-portfolio-data-frame-with-error-data" class="section level2">
<h2>Convert a portfolio data frame with error data</h2>
<p>For simplicity we use the 26 letters as stock names to give the
following example.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># stock names</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>stock <span class="ot">&lt;-</span> LETTERS</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="co"># generate 10 portfolios</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  l[[i]] <span class="ot">&lt;-</span> <span class="fu">sample</span>(stock, <span class="dv">10</span>)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>}</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co"># this portfolio contains false data, with a few stocks appearing more than once</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co"># in the same portfolio</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>l[[<span class="dv">1</span>]][<span class="dv">10</span>] <span class="ot">&lt;-</span> l[[<span class="dv">1</span>]][<span class="dv">5</span>]</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>l[[<span class="dv">6</span>]][<span class="dv">8</span>] <span class="ot">&lt;-</span> l[[<span class="dv">6</span>]][<span class="dv">2</span>]</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>portfolio <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">rbind</span>(l[[<span class="dv">1</span>]], l[[<span class="dv">2</span>]], l[[<span class="dv">3</span>]], l[[<span class="dv">4</span>]], l[[<span class="dv">5</span>]], l[[<span class="dv">6</span>]],</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>                                 l[[<span class="dv">7</span>]], l[[<span class="dv">8</span>]], l[[<span class="dv">9</span>]], l[[<span class="dv">10</span>]]))</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co"># first use the function convert() to convert the data frame</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="fu">library</span>(SA23204171)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">convert</span>(portfolio)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>result<span class="sc">$</span>correct</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># FALSE means there are errors in the original data, so we use correct.error() </span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># to filter out these false portfolios and give the correct converted matrix.</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co"># The error is apparent because there are &quot;2&quot; in the converted matrix.</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>new_result <span class="ot">&lt;-</span> <span class="fu">correct.error</span>(result)</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>new_result</span></code></pre></div>
<pre><code>## $res
##      I P E U K T W G Y J V M A N B C R S F L H Z D X
## [1,] 1 1 1 0 0 1 1 1 0 0 0 1 1 1 0 0 0 0 0 0 1 0 0 0
## [2,] 1 1 1 0 0 0 1 1 1 0 0 0 1 1 1 1 0 0 0 0 0 0 0 0
## [3,] 1 0 1 1 1 1 0 0 0 1 0 0 0 0 0 1 1 1 0 0 0 1 0 0
## [4,] 0 1 0 1 1 0 1 1 0 1 1 1 0 0 1 0 0 0 1 0 0 0 0 0
## [5,] 0 0 1 1 1 0 0 0 1 0 1 0 0 1 0 1 1 0 1 0 0 0 1 0
## [6,] 1 0 1 1 1 0 1 0 0 1 0 0 1 0 0 0 1 0 1 1 0 0 0 0
## [7,] 1 1 0 1 0 1 0 1 1 1 1 1 0 0 0 0 0 1 0 0 0 0 0 0
## [8,] 1 1 0 0 1 1 0 0 1 0 1 0 0 0 1 0 0 1 0 1 0 0 0 1
## 
## $correct
## [1] TRUE</code></pre>
<p>The output <strong>new_result</strong> of the function
correct.error() is a list. The first element is the correct matrix, and
this time it contains only 8 rows, because the 1st and 6th portfolio
have been filtered out. The second element provides a check for whether
this time the converted matrix is correct.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
